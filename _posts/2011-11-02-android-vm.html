---
layout: post
title: Android vm
date: 2011-11-02 01:14:22.000000000 +08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags:
- android
- java
meta:
  tagazine-media: a:7:{s:7:"primary";s:0:"";s:6:"images";a:0:{}s:6:"videos";a:0:{}s:11:"image_count";s:1:"0";s:6:"author";s:8:"26584959";s:7:"blog_id";s:8:"26915908";s:9:"mod_stamp";s:19:"2011-11-01
    17:14:22";}
  _edit_last: '1'
  _wpcom_is_markdown: '1'
author:
  login: mcloud
  email: ''
  display_name: mcloud
  first_name: ''
  last_name: ''
---
<p>Today I reprogram the filesystem using java, but when I put it on my android, the exception out of memory appeared, it must be beyond the heap size of vm , so the program must be optimized.</p>
<p>But first we must know how many size are in my phone. Using the java api are as follows:</p>
<p>// it will show max heap size you could use.</p>
<p>System.out.println(Runtime.getRuntime().maxMemory() / 1024 /1024);</p>
<p>// it will show max heap size the program used now….</p>
<p>System.out.println(Runtime.getRuntime().totalMemory() /1024);</p>
<p>// it will show free size the program can be used for the size before</p>
<p>System.out.println(Runtime.getRuntime().freeMemory() /1024 );</p>
<p>&nbsp;</p>
<p>Now you want to enlarge the heap size, you can use in the program ..</p>
<p>VMRuntime.getRuntime().setMinimumHeapSize(40 * 1024 * 1024);</p>
<p>But it doesn`t work, because you have not permission.</p>
<p>You can add the permission to the manifest, then you can set the max heap size…..</p>
<p>&nbsp;</p>
<p>The manual control the AVD, use emulator</p>
<p>-momery : set RAM</p>
<p>-partition-size: set ROM</p>
